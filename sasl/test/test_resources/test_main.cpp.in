#define BOOST_TEST_MODULE @SASL_TEST_PROJECT_NAME@
#define BOOST_TEST_NO_MAIN

#include <boost/test/unit_test.hpp>

#if defined(SASL_USE_LLVM)
#	include <sasl/include/driver/driver_api.h>
#endif

#include <eflib/include/memory/lifetime_manager.h>

int BOOST_TEST_CALL_DECL
main( int argc, char* argv[] )
{
#if defined(SASL_USE_LLVM)	
	sasl_initialize_driver();
#endif

	setvbuf( stdout, NULL, _IONBF, 0 );
	setvbuf( stderr, NULL, _IONBF, 0 );
	
	int ret = 0;
	{
		eflib::lifetime_manager lfmgr;
		ret = ::boost::unit_test::unit_test_main( &init_unit_test, argc, argv );
	}
	system("pause");
	
#if defined(SASL_USE_LLVM)
	sasl_finalize_driver();
#endif

	return ret;
}
